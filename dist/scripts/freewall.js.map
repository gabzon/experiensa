{"version":3,"sources":["../bower_components/freewall/freewall.js"],"names":["$","Freewall","selector","setDraggable","item","cellH","runtime","gutterX","gutterY","cellW","$item","handle","find","attr","layoutManager","onStart","event","setting","animate","transition","setTransition","this","css","addClass","onBlockDrag","call","onDrag","tracker","position","top","Math","round","left","width","height","min","max","limitRow","limitCol","klass","setHoles","refresh","onBlockMove","onDrop","removeClass","zIndex","x","y","key","oldDropId","matrix","removeAttr","holes","data-width","data-height","data-position","onBlockDrop","container","MAX","Number","MAX_VALUE","totalGrid","extend","defaultConfig","arguments","blocks","events","cellS","filter","lastId","length","maxWoB","maxHoB","minWoB","minHoB","running","totalCol","totalRow","sortFunc","keepOrder","bodyStyle","document","body","style","webkitTransition","MozTransition","msTransition","OTransition","addCustomEvent","name","func","toLowerCase","eid","push","appendBlock","items","allBlock","appendTo","block","activeBlock","isFunction","sort","each","index","loadBlock","engine","setWallSize","showBlock","draggable","getAttribute","appendHoles","i","newHoles","concat","h","destroy","fillHoles","fireEvent","object","fitHeight","$W","fitZone","fitWidth","resetGrid","adjustUnit","data","fixPos","option","fixSize","prepend","params","oldArg","method","callee","apply","Array","prototype","slice","reset","sortBy","unFilter","floor","plugin","hasOwnProperty","resize","setTimeout","onResize","isNumeric","src","constructor","Function","window","$D","delay","cacheSize","rightToLeft","bottomToTop","onGapFound","onComplete","onBlockReady","onBlockFinish","onBlockActive","onBlockResize","active","parseInt","blockId","hasClass","id","data-delay","isNaN","makeRound","col","row","split","holeId","setBlock","realBlock","toFixed","action","start","self","trans","opacity","nestedGrid","clearTimeout","innerWall","nested","adjustBlock","isTouch","config","startX","startY","mouseDown","evt","stopPropagation","originalEvent","touches","changedTouches","button","which","ele","clientX","clientY","$E","bind","mouseUp","mouseMove","unbind","$H","posStyle","on","stop","getFreeArea","t","l","maxY","maxX","minX","minY","totalWidth","totalHeight","data-total-col","data-total-row","data-wall-width","ceil","data-wall-height","giot","fillMatrix","w","wall","bigLoop","freeArea","misBlock","lastBlock","smallLoop","b","s","shift","splice","lastX","lastY","addConfig","newConfig","createEngine","engineData","createPlugin","pluginData","getMethod","freewall","Zepto","jQuery"],"mappings":"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","file":"freewall.js","sourcesContent":["// created by Minh Nguyen;\r\n// version 1.0.6;\r\n\r\n(function($) {\r\n\r\n    // for zeptojs;\r\n    $.isNumeric == null && ($.isNumeric = function(src) {\r\n        return src != null && src.constructor === Number;\r\n    });\r\n\r\n    $.isFunction == null && ($.isFunction = function(src) {\r\n        return src != null && src instanceof Function;\r\n    });\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var layoutManager = {\r\n        // default setting;\r\n        defaultConfig: {\r\n            animate: false,\r\n            cellW: 100, // function(container) {return 100;}\r\n            cellH: 100, // function(container) {return 100;}\r\n            delay: 0, // slowdown active block;\r\n            engine: 'giot', // 'giot' is a person name;\r\n            fixSize: null, // resize + adjust = fill gap;\r\n            //fixSize: 0, resize but keep ratio = no fill gap;\r\n            //fixSize: 1, no resize + no adjust = no fill gap;\r\n            gutterX: 15, // width spacing between blocks;\r\n            gutterY: 15, // height spacing between blocks;\r\n            keepOrder: false,\r\n            selector: '> div',\r\n            draggable: false,\r\n            cacheSize: true, // caches the original size of block;\r\n            rightToLeft: false,\r\n            bottomToTop: false,\r\n            onGapFound: function() {},\r\n            onComplete: function() {},\r\n            onResize: function() {},\r\n            onBlockDrag: function() {},\r\n            onBlockMove: function() {},\r\n            onBlockDrop: function() {},\r\n            onBlockReady: function() {},\r\n            onBlockFinish: function() {},\r\n            onBlockActive: function() {},\r\n            onBlockResize: function() {}\r\n        },\r\n        plugin: {},\r\n        totalGrid: 1,\r\n        transition: false,\r\n        loadBlock: function(item, setting) {\r\n            var runtime = setting.runtime;\r\n            var gutterX = runtime.gutterX;\r\n            var gutterY = runtime.gutterY;\r\n            var cellH = runtime.cellH;\r\n            var cellW = runtime.cellW;\r\n            var block = null;\r\n            var $item = $(item);\r\n            var active = $item.data(\"active\");\r\n            var fixPos = $item.attr('data-position');\r\n            var fixSize = parseInt($item.attr('data-fixSize'));\r\n            var blockId = runtime.lastId++ + '-' + runtime.totalGrid;\r\n\r\n            //ignore dragging block;\r\n            if ($item.hasClass('fw-float')) return null;\r\n            $item.attr({id: blockId, 'data-delay': item.index});\r\n\r\n            //remove animation for speed render;\r\n            if (setting.animate && this.transition) {\r\n                this.setTransition(item, \"\");\r\n            }\r\n\r\n            isNaN(fixSize) && (fixSize = null);\r\n            (fixSize == null) && (fixSize = setting.fixSize);\r\n            var makeRound = (!fixSize) ? \"round\" : \"ceil\";\r\n            // store original size;\r\n\r\n            $item.attr('data-height') == null && $item.attr('data-height', $item.height());\r\n            $item.attr('data-width') == null && $item.attr('data-width', $item.width());\r\n            var height = 1 * $item.attr('data-height');\r\n            var width = 1 * $item.attr('data-width');\r\n\r\n            if (!setting.cacheSize) {\r\n                item.style.width = \"\";\r\n                width = $item.width();\r\n\r\n                item.style.height = \"\";\r\n                height = $item.height();\r\n            }\r\n\r\n            var col = !width ? 0 : Math[makeRound]((width + gutterX) / cellW);\r\n            var row = !height ? 0 : Math[makeRound]((height + gutterY) / cellH);\r\n\r\n            // estimate size;\r\n            if (!fixSize && setting.cellH == 'auto') {\r\n                $item.width(cellW * col - gutterX);\r\n                item.style.height = \"\";\r\n                height = $item.height();\r\n                row = !height ? 0 : Math.round((height + gutterY) / cellH);\r\n            }\r\n\r\n            if (!fixSize && setting.cellW == 'auto') {\r\n                $item.height(cellH * row - gutterY);\r\n                item.style.width = \"\";\r\n                width = $item.width();\r\n                col = !width ? 0 : Math.round((width + gutterX) / cellW);\r\n            }\r\n\r\n            // for none resize block;\r\n            if ((fixSize != null) && (col > runtime.limitCol || row > runtime.limitRow)) {\r\n                block = null;\r\n            } else {\r\n                // get smallest width and smallest height of block;\r\n                // using for image runtime;\r\n                row && row < runtime.minHoB && (runtime.minHoB = row);\r\n                col && col < runtime.minWoB && (runtime.minWoB = col);\r\n\r\n                // get biggest width and biggest height of block;\r\n                row > runtime.maxHoB && (runtime.maxHoB = row);\r\n                col > runtime.maxWoB && (runtime.maxWoB = col);\r\n\r\n                width == 0 && (col = 0);\r\n                height == 0 && (row = 0);\r\n\r\n                block = {\r\n                    resize: false,\r\n                    id: blockId,\r\n                    width: col,\r\n                    height: row,\r\n                    fixSize: fixSize\r\n                };\r\n\r\n                // for fix position;\r\n                if (fixPos) {\r\n                    fixPos = fixPos.split(\"-\");\r\n                    block.y = 1 * fixPos[0];\r\n                    block.x = 1 * fixPos[1];\r\n                    block.width = fixSize != null ? col : Math.min(col, runtime.limitCol - block.x);\r\n                    block.height = fixSize != null ? row : Math.min(row, runtime.limitRow - block.y);\r\n                    var holeId = block.y + \"-\" + block.x + \"-\" + block.width + \"-\" + block.height;\r\n                    if (active) {\r\n                        runtime.holes[holeId] = {\r\n                            id: block.id,\r\n                            top: block.y,\r\n                            left: block.x,\r\n                            width: block.width,\r\n                            height: block.height\r\n                        };\r\n                        this.setBlock(block, setting);\r\n                    } else {\r\n                        delete runtime.holes[holeId];\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            // for css animation;\r\n            if ($item.attr(\"data-state\") == null) {\r\n                $item.attr(\"data-state\", \"init\");\r\n            } else {\r\n                $item.attr(\"data-state\", \"move\");\r\n            }\r\n\r\n            setting.onBlockReady.call(item, block, setting);\r\n\r\n            return (fixPos && active) ? null : block;\r\n        },\r\n        setBlock: function(block, setting) {\r\n            var runtime = setting.runtime;\r\n            var gutterX = runtime.gutterX;\r\n            var gutterY = runtime.gutterY;\r\n            var height = block.height;\r\n            var width = block.width;\r\n            var cellH = runtime.cellH;\r\n            var cellW = runtime.cellW;\r\n            var x = block.x;\r\n            var y = block.y;\r\n\r\n            if (setting.rightToLeft) {\r\n                x = runtime.limitCol - x - width;\r\n            }\r\n            if (setting.bottomToTop) {\r\n                y = runtime.limitRow - y - height;\r\n            }\r\n\r\n            var realBlock = {\r\n                fixSize: block.fixSize,\r\n                resize: block.resize,\r\n                top: y * cellH,\r\n                left: x  * cellW,\r\n                width: cellW * width - gutterX,\r\n                height: cellH * height - gutterY\r\n            };\r\n\r\n            realBlock.top = 1 * realBlock.top.toFixed(2);\r\n            realBlock.left = 1 * realBlock.left.toFixed(2);\r\n            realBlock.width = 1 * realBlock.width.toFixed(2);\r\n            realBlock.height = 1 * realBlock.height.toFixed(2);\r\n\r\n            //runtime.length += 1;\r\n            block.id && (runtime.blocks[block.id] = realBlock);\r\n\r\n            // for append feature;\r\n            return realBlock;\r\n        },\r\n        showBlock: function(item, setting) {\r\n            var runtime = setting.runtime;\r\n            var method = setting.animate && !this.transition ? 'animate' : 'css';\r\n            var block = runtime.blocks[item.id];\r\n            var $item = $(item);\r\n            var self = this;\r\n            var start = $item.attr(\"data-state\") != \"move\";\r\n            var trans = start ? \"width 0.5s, height 0.5s\" : \"top 0.5s, left 0.5s, width 0.5s, height 0.5s, opacity 0.5s\";\r\n\r\n            item.delay && clearTimeout(item.delay);\r\n            //ignore dragging block;\r\n            if ($item.hasClass('fw-float')) return;\r\n\r\n            // kill the old transition;\r\n            self.setTransition(item, \"\");\r\n            item.style.position = \"absolute\";\r\n            setting.onBlockActive.call(item, block, setting);\r\n\r\n            function action() {\r\n                // start to arrange;\r\n                start && $item.attr(\"data-state\", \"start\");\r\n                // add animation by using css3 transition;\r\n                if (setting.animate && self.transition) {\r\n                    self.setTransition(item, trans);\r\n                }\r\n\r\n                // for hidden block;\r\n                if (!block) {\r\n                    //var position = $item.position(); <= make speed so slow;\r\n                    var height = parseInt(item.style.height) || 0;\r\n                    var width = parseInt(item.style.width) || 0;\r\n                    var left = parseInt(item.style.left) || 0;\r\n                    var top = parseInt(item.style.top) || 0;\r\n                    $item[method]({\r\n                        left: left + width / 2,\r\n                        top: top + height / 2,\r\n                        width: 0,\r\n                        height: 0,\r\n                        opacity: 0\r\n                    });\r\n                } else {\r\n                    if (block.fixSize) {\r\n                        block.height = 1 * $item.attr(\"data-height\");\r\n                        block.width = 1 * $item.attr(\"data-width\");\r\n                    }\r\n\r\n                    $item[\"css\"]({\r\n                        opacity: 1,\r\n                        width: block.width,\r\n                        height: block.height\r\n                    });\r\n\r\n                    // for animating by javascript;\r\n                    $item[method]({\r\n                        top: block.top,\r\n                        left: block.left\r\n                    });\r\n\r\n                    if ($item.attr('data-nested') != null) {\r\n                        self.nestedGrid(item, setting);\r\n                    }\r\n                }\r\n\r\n                runtime.length -= 1;\r\n\r\n                setting.onBlockFinish.call(item, block, setting);\r\n\r\n                runtime.length == 0 && setting.onComplete.call(item, block, setting);\r\n            }\r\n\r\n            block && block.resize && setting.onBlockResize.call(item, block, setting);\r\n\r\n            setting.delay > 0 ? (item.delay = setTimeout(action, setting.delay * $item.attr(\"data-delay\"))) : action();\r\n        },\r\n        nestedGrid: function(item, setting) {\r\n            var innerWall, $item = $(item), runtime = setting.runtime;\r\n            var gutterX = $item.attr(\"data-gutterX\") || setting.gutterX;\r\n            var gutterY = $item.attr(\"data-gutterY\") || setting.gutterY;\r\n            var method = $item.attr(\"data-method\") || \"fitZone\";\r\n            var nested = $item.attr('data-nested') || \"> div\";\r\n            var cellH = $item.attr(\"data-cellH\") || setting.cellH;\r\n            var cellW = $item.attr(\"data-cellW\") || setting.cellW;\r\n            var block = runtime.blocks[item.id];\r\n\r\n            if (block) {\r\n                innerWall = new Freewall($item);\r\n                innerWall.reset({\r\n                    cellH: cellH,\r\n                    cellW: cellW,\r\n                    gutterX: 1 * gutterX,\r\n                    gutterY: 1 * gutterY,\r\n                    selector: nested,\r\n                    cacheSize: false\r\n                });\r\n\r\n                switch (method) {\r\n                    case \"fitHeight\":\r\n                        innerWall[method](block.height);\r\n                        break;\r\n                    case \"fitWidth\":\r\n                        innerWall[method](block.width);\r\n                        break;\r\n                    case \"fitZone\":\r\n                        innerWall[method](block.width, block.height);\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        adjustBlock: function(block, setting) {\r\n            var runtime = setting.runtime;\r\n            var gutterX = runtime.gutterX;\r\n            var gutterY = runtime.gutterY;\r\n            var $item = $(\"#\" + block.id);\r\n            var cellH = runtime.cellH;\r\n            var cellW = runtime.cellW;\r\n\r\n            if (setting.cellH == 'auto') {\r\n                $item.width(block.width * cellW - gutterX);\r\n                $item[0].style.height = \"\";\r\n                block.height = Math.round(($item.height() + gutterY) / cellH);\r\n            }\r\n        },\r\n        adjustUnit: function(width, height, setting) {\r\n            var gutterX = setting.gutterX;\r\n            var gutterY = setting.gutterY;\r\n            var runtime = setting.runtime;\r\n            var cellW = setting.cellW;\r\n            var cellH = setting.cellH;\r\n\r\n            $.isFunction(cellW) && (cellW = cellW(width));\r\n            cellW = 1 * cellW;\r\n            !$.isNumeric(cellW) && (cellW = 1);\r\n\r\n            $.isFunction(cellH) && (cellH = cellH(height));\r\n            cellH = 1 * cellH;\r\n            !$.isNumeric(cellH) && (cellH = 1);\r\n\r\n            if ($.isNumeric(width)) {\r\n                // adjust cell width via container;\r\n                cellW < 1 && (cellW = cellW * width);\r\n\r\n                // estimate total columns;\r\n                var limitCol = Math.max(1, Math.floor(width / cellW));\r\n\r\n                // adjust unit size for fit width;\r\n                if (!$.isNumeric(gutterX)) {\r\n                    gutterX = (width - limitCol * cellW) / Math.max(1, (limitCol - 1));\r\n                    gutterX = Math.max(0, gutterX);\r\n                }\r\n\r\n                limitCol = Math.floor((width + gutterX) / cellW);\r\n                runtime.cellW = (width + gutterX) / Math.max(limitCol, 1);\r\n                runtime.cellS = runtime.cellW / cellW;\r\n                runtime.gutterX = gutterX;\r\n                runtime.limitCol = limitCol;\r\n            }\r\n\r\n            if ($.isNumeric(height)) {\r\n                // adjust cell height via container;\r\n                cellH < 1 && (cellH = cellH * height);\r\n\r\n                // estimate total rows;\r\n                var limitRow = Math.max(1, Math.floor(height / cellH));\r\n\r\n                // adjust size unit for fit height;\r\n                if (!$.isNumeric(gutterY)) {\r\n                    gutterY = (height - limitRow * cellH) / Math.max(1, (limitRow - 1));\r\n                    gutterY = Math.max(0, gutterY);\r\n                }\r\n\r\n                limitRow = Math.floor((height + gutterY) / cellH);\r\n                runtime.cellH = (height + gutterY) / Math.max(limitRow, 1);\r\n                runtime.cellS = runtime.cellH / cellH;\r\n                runtime.gutterY = gutterY;\r\n                runtime.limitRow = limitRow;\r\n            }\r\n\r\n            if (!$.isNumeric(width)) {\r\n                // adjust cell width via cell height;\r\n                cellW < 1 && (cellW = runtime.cellH);\r\n                runtime.cellW = cellW != 1 ? cellW * runtime.cellS : 1;\r\n                runtime.gutterX = gutterX;\r\n                runtime.limitCol = 666666;\r\n            }\r\n\r\n            if (!$.isNumeric(height)) {\r\n                // adjust cell height via cell width;\r\n                cellH < 1 && (cellH = runtime.cellW);\r\n                runtime.cellH = cellH != 1 ? cellH * runtime.cellS : 1;\r\n                runtime.gutterY = gutterY;\r\n                runtime.limitRow = 666666;\r\n            }\r\n\r\n            runtime.keepOrder = setting.keepOrder;\r\n        },\r\n        resetGrid: function(runtime) {\r\n            runtime.blocks = {};\r\n            runtime.length = 0;\r\n            runtime.cellH = 0;\r\n            runtime.cellW = 0;\r\n            runtime.lastId = 1;\r\n            runtime.matrix = {};\r\n            runtime.totalCol = 0;\r\n            runtime.totalRow = 0;\r\n        },\r\n        setDraggable: function(item, option) {\r\n            var isTouch = false;\r\n            var config = {\r\n                startX: 0, //start clientX;\r\n                startY: 0,\r\n                top: 0,\r\n                left: 0,\r\n                handle: null,\r\n                onDrop: function() {},\r\n                onDrag: function() {},\r\n                onStart: function() {}\r\n            };\r\n\r\n            $(item).each(function() {\r\n                var setting = $.extend({}, config, option);\r\n                var handle = setting.handle || this;\r\n                var ele = this;\r\n                var $E = $(ele);\r\n                var $H = $(handle);\r\n\r\n                var posStyle = $E.css(\"position\");\r\n                posStyle != \"absolute\" && $E.css(\"position\", \"relative\");\r\n\r\n\r\n                function mouseDown(evt) {\r\n                    evt.stopPropagation();\r\n                    evt = evt.originalEvent;\r\n\r\n                    if (evt.touches) {\r\n                        isTouch = true;\r\n                        evt = evt.changedTouches[0];\r\n                    }\r\n\r\n                    if (evt.button != 2 && evt.which != 3) {\r\n                        setting.onStart.call(ele, evt);\r\n\r\n                        setting.startX = evt.clientX;\r\n                        setting.startY = evt.clientY;\r\n                        setting.top = parseInt($E.css(\"top\")) || 0;\r\n                        setting.left = parseInt($E.css(\"left\")) || 0;\r\n\r\n                        $D.bind(\"mouseup touchend\", mouseUp);\r\n                        $D.bind(\"mousemove touchmove\", mouseMove);\r\n                    }\r\n\r\n                    return false;\r\n                };\r\n\r\n\r\n                function mouseMove(evt) {\r\n                    evt = evt.originalEvent;\r\n                    isTouch && (evt = evt.changedTouches[0]);\r\n\r\n                    $E.css({\r\n                        top: setting.top - (setting.startY - evt.clientY),\r\n                        left: setting.left - (setting.startX - evt.clientX)\r\n                    });\r\n\r\n                    setting.onDrag.call(ele, evt);\r\n                };\r\n\r\n                function mouseUp(evt) {\r\n                    evt = evt.originalEvent;\r\n                    isTouch && (evt = evt.changedTouches[0]);\r\n\r\n                    setting.onDrop.call(ele, evt);\r\n\r\n                    $D.unbind(\"mouseup touchend\", mouseUp);\r\n                    $D.unbind(\"mousemove touchmove\", mouseMove);\r\n                };\r\n\r\n                // ignore drag drop on text field;\r\n                $E.find(\"iframe, form, input, textarea, .ignore-drag\")\r\n                .each(function() {\r\n                    $(this).on(\"touchstart mousedown\", function(evt) {\r\n                        evt.stopPropagation();\r\n                    });\r\n                });\r\n\r\n                $D.unbind(\"mouseup touchend\", mouseUp);\r\n                $D.unbind(\"mousemove touchmove\", mouseMove);\r\n                $H.unbind(\"mousedown touchstart\").bind(\"mousedown touchstart\", mouseDown);\r\n\r\n            });\r\n        },\r\n        setTransition: function(item, trans) {\r\n            var style = item.style;\r\n            var $item = $(item);\r\n\r\n            // remove animation;\r\n            if (!this.transition && $item.stop) {\r\n                $item.stop();\r\n            } else if (style.webkitTransition != null) {\r\n                style.webkitTransition = trans;\r\n            } else if (style.MozTransition != null) {\r\n                style.MozTransition = trans;\r\n            } else if (style.msTransition != null) {\r\n                style.msTransition = trans;\r\n            } else if (style.OTransition != null) {\r\n                style.OTransition = trans;\r\n            } else {\r\n                style.transition = trans;\r\n            }\r\n        },\r\n        getFreeArea: function(t, l, runtime) {\r\n            var maxY = Math.min(t + runtime.maxHoB, runtime.limitRow);\r\n            var maxX = Math.min(l + runtime.maxWoB, runtime.limitCol);\r\n            var minX = maxX;\r\n            var minY = maxY;\r\n            var matrix = runtime.matrix;\r\n\r\n            // find limit zone by horizon;\r\n            for (var y = t; y < minY; ++y) {\r\n                for (var x = l; x < maxX; ++x) {\r\n                    if (matrix[y + '-' + x]) {\r\n                        (l < x && x < minX) && (minX = x);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // find limit zone by vertical;\r\n            for (var y = t; y < maxY; ++y) {\r\n                for (var x = l; x < minX; ++x) {\r\n                    if (matrix[y + '-' + x]) {\r\n                        (t < y && y < minY) && (minY = y);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                top: t,\r\n                left: l,\r\n                width: minX - l,\r\n                height: minY - t\r\n            };\r\n\r\n        },\r\n        setWallSize: function(runtime, container) {\r\n            var totalRow = runtime.totalRow;\r\n            var totalCol = runtime.totalCol;\r\n            var gutterY = runtime.gutterY;\r\n            var gutterX = runtime.gutterX;\r\n            var cellH = runtime.cellH;\r\n            var cellW = runtime.cellW;\r\n            var totalWidth = Math.max(0, cellW * totalCol - gutterX);\r\n            var totalHeight = Math.max(0, cellH * totalRow - gutterY);\r\n\r\n            container.attr({\r\n                'data-total-col': totalCol,\r\n                'data-total-row': totalRow,\r\n                'data-wall-width': Math.ceil(totalWidth),\r\n                'data-wall-height': Math.ceil(totalHeight)\r\n            });\r\n\r\n            if (runtime.limitCol < runtime.limitRow) {\r\n                // do not set height with nesting grid;\r\n                !container.attr(\"data-height\") && container.height(Math.ceil(totalHeight));\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    var engine = {\r\n        // Giot just a person name;\r\n        giot: function(items, setting) {\r\n            var runtime = setting.runtime,\r\n                row = runtime.limitRow,\r\n                col = runtime.limitCol,\r\n                x = 0,\r\n                y = 0,\r\n                maxX = runtime.totalCol,\r\n                maxY = runtime.totalRow,\r\n                wall = {},\r\n                holes = runtime.holes,\r\n                block = null,\r\n                matrix = runtime.matrix,\r\n                bigLoop = Math.max(col, row),\r\n                freeArea = null,\r\n                misBlock = null,\r\n                fitWidth = col < row ? 1 : 0,\r\n                lastBlock = null,\r\n                smallLoop = Math.min(col, row);\r\n\r\n            // fill area with top, left, width, height;\r\n            function fillMatrix(id, t, l, w, h) {\r\n                for (var y = t; y < t + h;) {\r\n                    for (var x = l; x < l + w;) {\r\n                        matrix[y + '-' + x] = id;\r\n                        ++x > maxX && (maxX = x);\r\n                    }\r\n                    ++y > maxY && (maxY = y);\r\n                }\r\n            }\r\n\r\n            // set holes on the wall;\r\n            for (var i in holes) {\r\n                if (holes.hasOwnProperty(i)) {\r\n                    fillMatrix(holes[i][\"id\"] || true, holes[i]['top'], holes[i]['left'], holes[i]['width'], holes[i]['height']);\r\n                }\r\n            }\r\n\r\n\r\n            for (var b = 0; b < bigLoop; ++b) {\r\n                if (!items.length) break;\r\n                fitWidth ? (y = b) : (x = b);\r\n                lastBlock = null;\r\n\r\n                for (var s = 0; s < smallLoop; ++s) {\r\n                    if (!items.length) break;\r\n                    block = null;\r\n                    fitWidth ? (x = s) : (y = s);\r\n                    if (runtime.matrix[y + '-' + x]) continue;\r\n                    freeArea = layoutManager.getFreeArea(y, x, runtime);\r\n\r\n                    // trying resize last block to fit free area;\r\n                    if (setting.fixSize == null) {\r\n                        // resize near block to fill gap;\r\n                        if (lastBlock && !fitWidth && runtime.minHoB > freeArea.height) {\r\n                            lastBlock.height += freeArea.height;\r\n                            lastBlock.resize = true;\r\n                            fillMatrix(lastBlock.id, lastBlock.y, lastBlock.x, lastBlock.width, lastBlock.height);\r\n                            layoutManager.setBlock(lastBlock, setting);\r\n                            continue;\r\n                        } else if (lastBlock && fitWidth && runtime.minWoB > freeArea.width) {\r\n                            lastBlock.width += freeArea.width;\r\n                            lastBlock.resize = true;\r\n                            fillMatrix(lastBlock.id, lastBlock.y, lastBlock.x, lastBlock.width, lastBlock.height);\r\n                            layoutManager.setBlock(lastBlock, setting);\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    // get the next block to keep order;\r\n                    if (runtime.keepOrder) {\r\n                        block = items.shift();\r\n                        block.resize = true;\r\n                    } else {\r\n                        // find a suitable block to fit gap;\r\n                        for (var i = 0; i < items.length; ++i) {\r\n                            if (items[i].height > freeArea.height) continue;\r\n                            if (items[i].width > freeArea.width) continue;\r\n                            block = items.splice(i, 1)[0];\r\n                            break;\r\n                        }\r\n\r\n                        // trying resize the other block to fit gap;\r\n                        if (block == null && setting.fixSize == null) {\r\n                            // get other block fill to gap;\r\n                            for (var i = 0; i < items.length; ++i) {\r\n                                if (items[i]['fixSize'] != null) continue;\r\n                                block = items.splice(i, 1)[0];\r\n                                block.resize = true;\r\n                                break;\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n\r\n                    if (block != null) {\r\n                        // resize block with free area;\r\n                        if (block.resize) {\r\n                            if (fitWidth) {\r\n                                block.width = freeArea.width;\r\n                                if (setting.cellH == 'auto') {\r\n                                    layoutManager.adjustBlock(block, setting);\r\n                                }\r\n                                // for fitZone;\r\n                                block.height = Math.min(block.height, freeArea.height);\r\n                            } else {\r\n                                block.height = freeArea.height;\r\n                                // for fitZone;\r\n                                block.width = Math.min(block.width, freeArea.width);\r\n                            }\r\n                        }\r\n\r\n                        wall[block.id] = {\r\n                            id: block.id,\r\n                            x: x,\r\n                            y: y,\r\n                            width: block.width,\r\n                            height: block.height,\r\n                            resize: block.resize,\r\n                            fixSize: block.fixSize\r\n                        };\r\n\r\n                        // keep success block for next round;\r\n                        lastBlock = wall[block.id];\r\n\r\n                        fillMatrix(lastBlock.id, lastBlock.y, lastBlock.x, lastBlock.width, lastBlock.height);\r\n                        layoutManager.setBlock(lastBlock, setting);\r\n                    } else {\r\n                        // get expect area;\r\n                        var misBlock = {\r\n                            x: x,\r\n                            y: y,\r\n                            fixSize: 0\r\n                        };\r\n                        if (fitWidth) {\r\n                            misBlock.width = freeArea.width;\r\n                            misBlock.height = 0;\r\n                            var lastX = x - 1;\r\n                            var lastY = y;\r\n\r\n                            while (matrix[lastY + '-' + lastX]) {\r\n                                matrix[lastY + '-' + x] = true;\r\n                                misBlock.height += 1;\r\n                                lastY += 1;\r\n                            }\r\n                        } else {\r\n                            misBlock.height = freeArea.height;\r\n                            misBlock.width = 0;\r\n                            var lastY = y - 1;\r\n                            var lastX = x;\r\n\r\n                            while (matrix[lastY + '-' + lastX]) {\r\n                                matrix[y + '-' + lastX] = true;\r\n                                misBlock.width += 1;\r\n                                lastX += 1;\r\n                            }\r\n                        }\r\n                        setting.onGapFound(layoutManager.setBlock(misBlock, setting), setting);\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            runtime.matrix = matrix;\r\n            runtime.totalRow = maxY;\r\n            runtime.totalCol = maxX;\r\n        }\r\n    };\r\n\r\n\r\n\r\n    function Freewall(selector) {\r\n\r\n        var container = $(selector);\r\n        if (container.css('position') == 'static') {\r\n            container.css('position', 'relative');\r\n        }\r\n        var MAX = Number.MAX_VALUE;\r\n        var klass = this;\r\n        // increase the instance index;\r\n        layoutManager.totalGrid += 1;\r\n\r\n        var setting = $.extend({}, layoutManager.defaultConfig);\r\n        var runtime = {\r\n            arguments: null,\r\n            blocks: {}, // store all items;\r\n            events: {}, // store custome events;\r\n            matrix: {},\r\n            holes: {}, // forbidden zone;\r\n\r\n            cellW: 0,\r\n            cellH: 0, // unit adjust;\r\n            cellS: 1, // unit scale;\r\n\r\n            filter: '', // filter selector;\r\n            lastId: 0,\r\n            length: 0,\r\n\r\n            maxWoB: 0, // max width of block;\r\n            maxHoB: 0,\r\n            minWoB: MAX,\r\n            minHoB: MAX, // min height of block;\r\n\r\n            running: 0, // flag to check layout arranging;\r\n\r\n            gutterX: 15,\r\n            gutterY: 15,\r\n\r\n            totalCol: 0,\r\n            totalRow: 0,\r\n\r\n            limitCol: 666666, // maximum column;\r\n            limitRow: 666666,\r\n\r\n            sortFunc: null,\r\n            keepOrder: false\r\n        };\r\n        setting.runtime = runtime;\r\n        runtime.totalGrid = layoutManager.totalGrid;\r\n\r\n        // check browser support transition;\r\n        var bodyStyle = document.body.style;\r\n        if (!layoutManager.transition) {\r\n            (bodyStyle.webkitTransition != null ||\r\n            bodyStyle.MozTransition != null ||\r\n            bodyStyle.msTransition != null ||\r\n            bodyStyle.OTransition != null ||\r\n            bodyStyle.transition != null) &&\r\n            (layoutManager.transition = true);\r\n        }\r\n\r\n\r\n        function setDraggable(item) {\r\n\r\n            var gutterX = runtime.gutterX;\r\n            var gutterY = runtime.gutterY;\r\n            var cellH = runtime.cellH;\r\n            var cellW = runtime.cellW;\r\n            var $item = $(item);\r\n            var handle = $item.find($item.attr(\"data-handle\"));\r\n            layoutManager.setDraggable(item, {\r\n                handle: handle[0],\r\n                onStart: function(event) {\r\n                    if (setting.animate && layoutManager.transition) {\r\n                        layoutManager.setTransition(this, \"\");\r\n                    }\r\n                    $item.css('z-index', 9999).addClass('fw-float');\r\n\r\n                    setting.onBlockDrag.call(item, event);\r\n                },\r\n                onDrag: function(event, tracker) {\r\n                    var position = $item.position();\r\n                    var top = Math.round(position.top / cellH);\r\n                    var left = Math.round(position.left / cellW);\r\n                    var width = Math.round($item.width() / cellW);\r\n                    var height = Math.round($item.height() / cellH);\r\n                    top = Math.min(Math.max(0, top), runtime.limitRow - height);\r\n                    left = Math.min(Math.max(0, left), runtime.limitCol - width);\r\n                    klass.setHoles({top: top, left: left, width: width, height: height});\r\n                    klass.refresh();\r\n\r\n                    setting.onBlockMove.call(item, event);\r\n                },\r\n                onDrop: function(event) {\r\n                    var position = $item.position();\r\n                    var top = Math.round(position.top / cellH);\r\n                    var left = Math.round(position.left / cellW);\r\n                    var width = Math.round($item.width() / cellW);\r\n                    var height = Math.round($item.height() / cellH);\r\n                    top = Math.min(Math.max(0, top), runtime.limitRow - height);\r\n                    left = Math.min(Math.max(0, left), runtime.limitCol - width);\r\n\r\n                    $item.removeClass('fw-float');\r\n                    $item.css({\r\n                        zIndex: \"auto\",\r\n                        top: top * cellH,\r\n                        left: left * cellW\r\n                    });\r\n\r\n                    //check old drag element;\r\n                    var x, y, key, oldDropId;\r\n                    for (y = 0; y < height; ++y) {\r\n                        for (x = 0; x < width; ++x) {\r\n                            key = (y + top) + \"-\" + (x + left);\r\n                            oldDropId = runtime.matrix[key];\r\n                            if (oldDropId && oldDropId != true) {\r\n                                $(\"#\" + oldDropId).removeAttr(\"data-position\");\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    runtime.holes = {};\r\n\r\n                    $item.attr({\r\n                        \"data-width\": $item.width(),\r\n                        \"data-height\": $item.height(),\r\n                        \"data-position\": top + \"-\" + left\r\n                    });\r\n\r\n                    klass.refresh();\r\n\r\n                    setting.onBlockDrop.call(item, event);\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        $.extend(klass, {\r\n\r\n            addCustomEvent: function(name, func) {\r\n                var events = runtime.events;\r\n                name = name.toLowerCase();\r\n                !events[name] && (events[name] = []);\r\n                func.eid = events[name].length;\r\n                events[name].push(func);\r\n                return this;\r\n            },\r\n\r\n            appendBlock: function(items) {\r\n                var allBlock = $(items).appendTo(container);\r\n                var block = null;\r\n                var activeBlock = [];\r\n\r\n                if (runtime.arguments) {\r\n\r\n                    if ($.isFunction(runtime.sortFunc)) {\r\n                        allBlock.sort(runtime.sortFunc);\r\n                    }\r\n\r\n                    allBlock.each(function(index, item) {\r\n                        item.index = ++index;\r\n                        block = layoutManager.loadBlock(item, setting);\r\n                        block && activeBlock.push(block);\r\n                    });\r\n\r\n                    engine[setting.engine](activeBlock, setting);\r\n\r\n                    layoutManager.setWallSize(runtime, container);\r\n\r\n                    runtime.length = allBlock.length;\r\n\r\n                    allBlock.each(function(index, item) {\r\n                        layoutManager.showBlock(item, setting);\r\n                        if (setting.draggable || item.getAttribute('data-draggable')) {\r\n                            setDraggable(item);\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            /*\r\n            add one or more blank area (hole) on layout;\r\n            example:\r\n\r\n                wall.appendHoles({\r\n                    top: 10,\r\n                    left: 36,\r\n                    width: 2,\r\n                    height: 6\r\n                });\r\n\r\n                wall.appendHoles([\r\n                    {\r\n                        top: 16,\r\n                        left: 16,\r\n                        width: 8,\r\n                        height: 2\r\n                    },\r\n                    {\r\n                        top: 10,\r\n                        left: 36,\r\n                        width: 2,\r\n                        height: 6\r\n                    }\r\n                ]);\r\n\r\n            */\r\n            appendHoles: function(holes) {\r\n                var newHoles = [].concat(holes), h = {}, i;\r\n                for (i = 0; i < newHoles.length; ++i) {\r\n                    h = newHoles[i];\r\n                    runtime.holes[h.top + \"-\" + h.left + \"-\" + h.width + \"-\" + h.height] = h;\r\n                }\r\n                return this;\r\n            },\r\n\r\n            container: container,\r\n\r\n            destroy: function() {\r\n                var allBlock = container.find(setting.selector).removeAttr('id'),\r\n                    block = null,\r\n                    activeBlock = [];\r\n\r\n                allBlock.each(function(index, item) {\r\n                    $item = $(item);\r\n                    var width = 1 * $item.attr('data-width') || \"\";\r\n                    var height = 1 * $item.attr('data-height') || \"\";\r\n                    $item.width(width).height(height).css({\r\n                        position: 'static'\r\n                    });\r\n                });\r\n            },\r\n\r\n            fillHoles: function(holes) {\r\n                if (arguments.length == 0) {\r\n                    runtime.holes = {};\r\n                } else {\r\n                    var newHoles = [].concat(holes), h = {}, i;\r\n                    for (i = 0; i < newHoles.length; ++i) {\r\n                        h = newHoles[i];\r\n                        delete runtime.holes[h.top + \"-\" + h.left + \"-\" + h.width + \"-\" + h.height];\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n\r\n            filter: function(filter) {\r\n                runtime.filter = filter;\r\n                if (runtime.arguments) {\r\n                    this.refresh();\r\n                }\r\n                return this;\r\n            },\r\n\r\n            fireEvent: function(name, object, setting) {\r\n                var events = runtime.events;\r\n                name = name.toLowerCase();\r\n                if (events[name] && events[name].length) {\r\n                    for (var i = 0; i < events[name].length; ++i) {\r\n                        events[name][i].call(this, object, setting);\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n\r\n            fitHeight: function(height) {\r\n\r\n                var height = height ? height : container.height() || $W.height();\r\n\r\n                this.fitZone('auto', height);\r\n\r\n                runtime.arguments = arguments;\r\n            },\r\n\r\n            fitWidth: function(width) {\r\n\r\n                var width = width ? width : container.width() || $W.width();\r\n\r\n                this.fitZone(width, 'auto');\r\n\r\n                runtime.arguments = arguments;\r\n            },\r\n\r\n            fitZone: function(width, height) {\r\n                var allBlock = container.find(setting.selector).removeAttr('id'),\r\n                    block = null,\r\n                    activeBlock = [];\r\n\r\n                height = height ? height : container.height() || $W.height();\r\n                width = width ? width : container.width() || $W.width();\r\n\r\n                runtime.arguments = arguments;\r\n\r\n                layoutManager.resetGrid(runtime);\r\n\r\n                layoutManager.adjustUnit(width, height, setting);\r\n\r\n                if (runtime.filter) {\r\n                    allBlock.data('active', 0);\r\n                    allBlock.filter(runtime.filter).data('active', 1);\r\n                } else {\r\n                    allBlock.data('active', 1);\r\n                }\r\n\r\n                if ($.isFunction(runtime.sortFunc)) {\r\n                    allBlock.sort(runtime.sortFunc);\r\n                }\r\n\r\n                allBlock.each(function(index, item) {\r\n                    var $item = $(item);\r\n                    item.index = ++index;\r\n                    block = layoutManager.loadBlock(item, setting);\r\n                    block && $item.data(\"active\") && activeBlock.push(block);\r\n                });\r\n\r\n                klass.fireEvent('onGridReady', container, setting);\r\n\r\n                engine[setting.engine](activeBlock, setting);\r\n\r\n                layoutManager.setWallSize(runtime, container);\r\n\r\n                klass.fireEvent('onGridArrange', container, setting);\r\n\r\n                runtime.length = allBlock.length;\r\n\r\n                allBlock.each(function(index, item) {\r\n                    layoutManager.showBlock(item, setting);\r\n                    if (setting.draggable || item.getAttribute('data-draggable')) {\r\n                        setDraggable(item);\r\n                    }\r\n                });\r\n            },\r\n\r\n            /*\r\n            set block with special position, the top and left are multiple of unit width/height;\r\n            example:\r\n\r\n                wall.fixPos({\r\n                    top: 0,\r\n                    left: 0,\r\n                    block: $('.free')\r\n                });\r\n            */\r\n            fixPos: function(option) {\r\n                $(option.block).attr({'data-position': option.top + \"-\" + option.left});\r\n                return this;\r\n            },\r\n\r\n            /*\r\n            set block with special size, the width and height are multiple of unit width/height;\r\n            example:\r\n\r\n                wall.fixSize({\r\n                    height: 5,\r\n                    width: 2,\r\n                    block: $('.free')\r\n                });\r\n            */\r\n            fixSize: function(option) {\r\n                option.height != null && $(option.block).attr({'data-height': option.height});\r\n                option.width != null && $(option.block).attr({'data-width': option.width});\r\n                return this;\r\n            },\r\n\r\n            prepend: function(items) {\r\n                container.prepend(items);\r\n                if (runtime.arguments) {\r\n                    this.refresh();\r\n                }\r\n                return this;\r\n            },\r\n\r\n            refresh: function() {\r\n                var params = arguments.length ? arguments : runtime.arguments;\r\n                var oldArg = runtime.arguments;\r\n                var method = oldArg ? oldArg.callee : this.fitWidth;\r\n                method.apply(this, Array.prototype.slice.call(params, 0));\r\n                return this;\r\n            },\r\n\r\n            /*\r\n            custom layout setting;\r\n            example:\r\n\r\n                wall.reset({\r\n                    selector: '.brick',\r\n                    animate: true,\r\n                    cellW: 160,\r\n                    cellH: 160,\r\n                    delay: 50,\r\n                    onResize: function() {\r\n                        wall.fitWidth();\r\n                    }\r\n                });\r\n            */\r\n            reset: function(option) {\r\n                $.extend(setting, option);\r\n                return this;\r\n            },\r\n\r\n            /*\r\n            create one or more blank area (hole) on layout;\r\n            example:\r\n\r\n                wall.setHoles({\r\n                    top: 2,\r\n                    left: 2,\r\n                    width: 2,\r\n                    height: 2\r\n                });\r\n            */\r\n\r\n            setHoles: function(holes) {\r\n                var newHoles = [].concat(holes), h = {}, i;\r\n                runtime.holes = {};\r\n                for (i = 0; i < newHoles.length; ++i) {\r\n                    h = newHoles[i];\r\n                    runtime.holes[h.top + \"-\" + h.left + \"-\" + h.width + \"-\" + h.height] = h;\r\n                }\r\n                return this;\r\n            },\r\n            /*\r\n            sort items by using array sort function;\r\n            example:\r\n\r\n                wall.sortBy(function(itemA, itemB) {\r\n                    return $(itemA).width() - $(itemB).width();\r\n                });\r\n            */\r\n            sortBy: function(func) {\r\n                runtime.sortFunc = func;\r\n                if (runtime.arguments) {\r\n                    this.refresh();\r\n                }\r\n                return this;\r\n            },\r\n\r\n            unFilter: function() {\r\n                delete runtime.filter;\r\n                this.refresh();\r\n                return this;\r\n            }\r\n        });\r\n\r\n        container.attr('data-min-width', Math.floor($W.width() / 80) * 80);\r\n        // execute plugins;\r\n        for (var i in layoutManager.plugin) {\r\n            if (layoutManager.plugin.hasOwnProperty(i)) {\r\n                layoutManager.plugin[i].call(klass, setting, container);\r\n            }\r\n        }\r\n\r\n        // setup resize event;\r\n        $W.resize(function() {\r\n            if (runtime.running) return;\r\n            runtime.running = 1;\r\n            setTimeout(function() {\r\n                runtime.running = 0;\r\n                setting.onResize.call(klass, container);\r\n            }, 122);\r\n            container.attr('data-min-width', Math.floor($W.width() / 80) * 80);\r\n        });\r\n    };\r\n\r\n    /*\r\n    add default setting;\r\n    example:\r\n\r\n        Freewall.addConfig({\r\n            offsetLeft: 0\r\n        });\r\n    */\r\n    Freewall.addConfig = function(newConfig) {\r\n        // add default setting;\r\n        $.extend(layoutManager.defaultConfig, newConfig);\r\n    };\r\n\r\n\r\n    /*\r\n    support create new arrange algorithm;\r\n    example:\r\n\r\n        Freewall.createEngine({\r\n            slice: function(items, setting) {\r\n                // slice engine;\r\n            }\r\n        });\r\n    */\r\n    Freewall.createEngine = function(engineData) {\r\n        // create new engine;\r\n        $.extend(engine, engineData);\r\n    };\r\n\r\n    /*\r\n    support create new plugin;\r\n    example:\r\n\r\n        Freewall.createPlugin({\r\n            centering: function(setting, container) {\r\n                console.log(this);\r\n                console.log(setting);\r\n            }\r\n        })l\r\n    */\r\n    Freewall.createPlugin = function(pluginData) {\r\n        // register new plugin;\r\n        $.extend(layoutManager.plugin, pluginData);\r\n    };\r\n\r\n    /*\r\n    support access helper function;\r\n    example:\r\n\r\n        Freewall.getMethod('setBlock')(block, setting);\r\n    */\r\n    Freewall.getMethod = function(method) {\r\n        // get helper method;\r\n        return layoutManager[method];\r\n    };\r\n\r\n    window.Freewall = window.freewall = Freewall;\r\n\r\n})(window.Zepto || window.jQuery);\r\n"],"sourceRoot":"assets/scripts/"}